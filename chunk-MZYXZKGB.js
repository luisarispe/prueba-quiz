import{q as Gt}from"./chunk-GDD3RMXL.js";import{$ as At,B as et,Ba as Ft,Bc as kt,G as T,Ha as rt,I as P,Ja as ot,Ka as Ct,Kc as $,L as nt,La as it,Lc as ct,M as k,P as bt,Q as Dt,Sa as Pt,V as wt,Z as I,a as u,b as Mt,ba as G,da as Rt,ea as jt,f as J,h as j,ia as p,ja as V,k as D,l as Tt,la as h,m as x,na as c,o as Nt,oa as l,pb as E,q as Q,qa as xt,r as O,s as F,t as tt,ta as U,v as M,vb as st,x as C,yc as at}from"./chunk-JTGICLZP.js";function ut(t,r){let e=!r?.manualCleanup;e&&!r?.injector&&Ft(ut);let n=e?r?.injector?.get(it)??l(it):null,o;r?.requireSync?o=st({kind:0}):o=st({kind:1,value:r?.initialValue});let i=t.subscribe({next:s=>o.set({kind:1,value:s}),error:s=>{if(r?.rejectErrors)throw s;o.set({kind:2,error:s})}});return n?.onDestroy(i.unsubscribe.bind(i)),$(()=>{let s=o();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new jt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var v="NGXS_META",ft="NGXS_OPTIONS_META",lt="NGXS_SELECTOR_META";function pt(t){if(!t.hasOwnProperty(v)){let r={name:null,actions:{},defaults:{},path:null,makeRootSelector(e){return e.getStateGetter(r.name)},children:[]};Object.defineProperty(t,v,{value:r})}return N(t)}function N(t){return t[v]}function Vt(t){return t.hasOwnProperty(lt)||Object.defineProperty(t,lt,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),ht(t)}function ht(t){return t[lt]}function pe(t,r){return t===r}function he(t,r,e){if(r===null||e===null||r.length!==e.length)return!1;let n=r.length;for(let o=0;o<n;o++)if(!t(r[o],e[o]))return!1;return!0}function X(t,r=pe){let e=null,n=null;function o(){return he(r,e,arguments)||(n=t.apply(null,arguments)),e=arguments,n}return o.reset=function(){e=null,n=null},o}var ge=!1,Se=(()=>{class t{static{this._value={}}static set(e){this._value=e}static pop(){let e=this._value;return this._value={},e}}return t})(),gt=new h(ge?"INITIAL_STATE_TOKEN":"",{providedIn:"root",factory:()=>Se.pop()}),L=(()=>{class t extends x{constructor(){super(1)}bootstrap(){this.next(!0),this.complete()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ut=!1,$t=new h(Ut?"\u0275NGXS_STATE_FACTORY":""),Bt=new h(Ut?"\u0275NGXS_STATE_CONTEXT_FACTORY":"");function Xt(t){let r=[],e=!1;return function(...o){if(e){r.unshift(o);return}for(e=!0,t(...o);r.length>0;){let i=r.pop();i&&t(...i)}e=!1}}var B=class extends D{constructor(){super(...arguments),this._orderedNext=Xt(r=>super.next(r))}next(r){this._orderedNext(r)}},dt=class extends Tt{constructor(r){super(r),this._orderedNext=Xt(e=>super.next(e)),this._currentValue=r}getValue(){return this._currentValue}next(r){this._currentValue=r,this._orderedNext(r)}};function St(t){return r=>new j(e=>r.subscribe({next(n){t(()=>e.next(n))},error(n){t(()=>e.error(n))},complete(){t(()=>e.complete())}}))}var Z=(()=>{class t extends dt{constructor(){super({}),this.state=ut(this.pipe(St(ct)),{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.complete()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var H=(()=>{class t{static{this.type="@@INIT"}}return t})(),Y=(()=>{class t{static{this.type="@@UPDATE_STATE"}constructor(e){this.addedStates=e}}return t})(),me=!1,Lt=new h(me?"NGXS_PLUGINS":"");function w(t){return t.constructor?.type||t.type}var yt=(t,r,e)=>{t=u({},t);let n=r.split("."),o=n.length-1;return n.reduce((i,s,a)=>(a===o?i[s]=e:i[s]=Array.isArray(i[s])?i[s].slice():u({},i[s]),i&&i[s]),t),t},z=(t,r)=>r.split(".").reduce((e,n)=>e&&e[n],t);function Zt(t){return typeof t=="function"}var ve=(()=>{class t{enter(e){return e()}leave(e){return e()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _e(t,r,e){throw new Error(`State name '${t}' from ${r} already exists in ${e}.`)}function Ee(t){throw new Error(`States must be decorated with @State() decorator, but "${t}" isn't.`)}function Oe(t){return`'${t}' class should be decorated with @Injectable() right after the @State() decorator`}function Ie(t){let r="You have an invalid state initialization order. This typically occurs when `NgxsModule.forFeature`\nor `provideStates` is called before `NgxsModule.forRoot` or `provideStore`.\nOne example is when `NgxsRouterPluginModule.forRoot` is called before `NgxsModule.forRoot`.";if(t){let e=Object.keys(t).map(n=>`"${n}"`);r+=`
Feature states added before the store initialization is complete: ${e.join(", ")}.`}return r}var qt=(()=>{class t{constructor(e,n){this._ngZone=e,this._platformId=n}enter(e){return Gt(this._platformId)?this.runInsideAngular(e):this.runOutsideAngular(e)}leave(e){return this.runInsideAngular(e)}runInsideAngular(e){return E.isInAngularZone()?e():this._ngZone.run(e)}runOutsideAngular(e){return E.isInAngularZone()?this._ngZone.runOutsideAngular(e):e()}static{this.\u0275fac=function(n){return new(n||t)(c(E),c(Pt))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Wt=!1,Jt=new h(Wt?"CUSTOM_NGXS_EXECUTION_STRATEGY":""),Me=new h(Wt?"NGXS_EXECUTION_STRATEGY":"",{providedIn:"root",factory:()=>{let t=l(E),r=l(xt),e=r.get(Jt),n=t instanceof E;return e?r.get(e):r.get(n?qt:ve)}}),Qt=(()=>{class t{constructor(e){this._executionStrategy=e}enter(e){return this._executionStrategy.enter(e)}leave(e){return this._executionStrategy.leave(e)}static{this.\u0275fac=function(n){return new(n||t)(c(Me))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),te=t=>(...r)=>t.shift()(...r,(...n)=>te(t)(...n));function q(t){return St(r=>t.leave(r))}var ee=(()=>{class t extends B{ngOnDestroy(){this.complete()}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=rt(t)))(o||t)}})()}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var vt=(()=>{class t{constructor(e,n){this._parentManager=e,this._pluginHandlers=n,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){let e=this.getPluginHandlers();this.rootPlugins.push(...e)}getPluginHandlers(){return(this._pluginHandlers||[]).map(n=>n.handle?n.handle.bind(n):n)}static{this.\u0275fac=function(n){return new(n||t)(c(t,12),c(Lt,8))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})(),_t=new WeakMap,Ht=J.onUnhandledError;J.onUnhandledError=function(t){let r=_t.get(t);if(r)r();else if(Ht)Ht.call(this,t);else throw t};function Te(t){let r=_t.get(t);return r?(r(),!0):!1}function Ne(t,r){if(t!==null&&typeof t=="object"){let e=!1;_t.set(t,()=>{e||(e=!0,r())})}return t}function be(t){return r=>{let e=r.subscribe({error:n=>{t.runOutsideAngular(()=>{queueMicrotask(()=>{e&&Te(n)})})}});return new j(n=>(e?.unsubscribe(),e=null,r.subscribe(n)))}}var ne=(()=>{class t extends D{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=rt(t)))(o||t)}})()}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),De=(()=>{class t{constructor(e,n,o,i,s,a){this._ngZone=e,this._actions=n,this._actionResults=o,this._pluginManager=i,this._stateStream=s,this._ngxsExecutionStrategy=a}dispatch(e){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(e)).pipe(be(this._ngZone),q(this._ngxsExecutionStrategy))}dispatchByEvents(e){return Array.isArray(e)?e.length===0?O(void 0):et(e.map(n=>this.dispatchSingle(n))).pipe(M(()=>{})):this.dispatchSingle(e)}dispatchSingle(e){let n=this._stateStream.getValue(),o=this._pluginManager.plugins;return te([...o,(i,s)=>{i!==n&&this._stateStream.next(i);let a=this.getActionResultStream(s);return a.subscribe(d=>this._actions.next(d)),this._actions.next({action:s,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(n,e).pipe(I())}getActionResultStream(e){return this._actionResults.pipe(T(n=>n.action===e&&n.status!=="DISPATCHED"),k(1),I())}createDispatchObservable(e){return e.pipe(Dt(n=>{switch(n.status){case"SUCCESSFUL":return O(this._stateStream.getValue());case"ERRORED":return F(()=>n.error);default:return Nt}})).pipe(I())}static{this.\u0275fac=function(n){return new(n||t)(c(E),c(ee),c(ne),c(vt),c(Z),c(Qt))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Et=!1,re=new h(Et?"ROOT_STATE_TOKEN":""),oe=new h(Et?"FEATURE_STATE_TOKEN":""),ie=new h(Et?"NGXS_OPTIONS":""),A=(()=>{class t{constructor(){this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=qt,this.selectorOptions={injectContainerState:!1,suppressErrors:!1}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=p({token:t,factory:()=>(()=>{let e=new t,n=l(ie);return Mt(u(u({},e),n),{selectorOptions:u(u({},e.selectorOptions),n.selectorOptions)})})(),providedIn:"root"})}}return t})(),mt=class{constructor(r,e,n){this.previousValue=r,this.currentValue=e,this.firstChange=n}};var R=(()=>{class t{constructor(e,n,o){this._stateStream=e,this._dispatcher=n,this._config=o}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:n=>this._stateStream.next(n),dispatch:n=>this._dispatcher.dispatch(n)}}setStateToTheCurrentWithNew(e){let n=this.getRootStateOperations(),o=n.getState();n.setState(u(u({},o),e.defaults))}static{this.\u0275fac=function(n){return new(n||t)(c(Z),c(De),c(A))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var we=!1;function Ae(t,r,e){return n=>{let{argumentSelectorFunctions:o,selectorOptions:i}=je(n,t,r),{suppressErrors:s}=i;return function(d){let g=o.map(S=>S(d));try{return e(...g)}catch(S){if(s&&S instanceof TypeError)return;throw we&&console.error("The selector below has thrown an error upon invocation. Please check for any unsafe property access that may result in null or undefined values.",t.originalFn),S}}}}function Re(t,r){let e=r&&r.containerClass,o=X(function(...s){let a=t.apply(e,s);return a instanceof Function?X.apply(null,[a]):a});return Object.setPrototypeOf(o,t),o}function je(t,r,e=[]){let n=r.getSelectorOptions(),o=t.getSelectorOptions(n),s=xe(e,o,r.containerClass).map(a=>se(a)(t));return{selectorOptions:o,argumentSelectorFunctions:s}}function xe(t=[],r,e){let n=[],o=r.injectContainerState||t.length===0;return e&&o&&N(e)&&n.push(e),n.push(...t),n}function se(t){let r=ht(t)||N(t);return r&&r.makeRootSelector||(()=>t)}var Ot=!1;function Fe(t){return r=>{for(let e=0;e<t.length;e++){if(!r)return;r=r[t[e]]}return r}}function Ce(t){let r=t,e="store."+r[0],n=0,o=r.length,i=e;for(;++n<o;)i=i+" && "+(e=e+"."+r[n]);return new Function("store","return "+i+";")}var Pe=new h(Ot?"PROP_GETTER":"",{providedIn:"root",factory:()=>l(A).compatibility?.strictContentSecurityPolicy?Fe:Ce});function ke(t){let r=e=>{let n=t.find(o=>o===e);if(Ot&&!n)throw new Error(`Child state not found: ${e}. \r
You may have forgotten to add states to module`);return n[v].name};return t.reduce((e,n)=>{let{name:o,children:i}=n[v];return e[o]=(i||[]).map(r),e},{})}function Ge(t){return t.reduce((r,e)=>{let n=e[v];return r[n.name]=e,r},{})}function Ve(t,r={}){let e=(n,o)=>{for(let i in n)if(n.hasOwnProperty(i)&&n[i].indexOf(o)>=0){let s=e(n,i);return s!==null?`${s}.${i}`:i}return null};for(let n in t)if(t.hasOwnProperty(n)){let o=e(t,n);r[n]=o?`${o}.${n}`:n}return r}function Ue(t){let r=[],e={},n=(o,i=[])=>{Array.isArray(i)||(i=[]),i.push(o),e[o]=!0,t[o].forEach(s=>{if(Ot&&i.indexOf(s)>=0)throw new Error(`Circular dependency '${s}' is required by '${o}': ${i.join(" -> ")}`);e[s]||n(s,i.slice(0))}),r.indexOf(o)<0&&r.push(o)};return Object.keys(t).forEach(o=>n(o)),r.reverse()}function $e(...t){return Be(t,["DISPATCHED"])}function Be(t,r,e=Le){let n=Ze(t),o=r&&He(r);return function(i){return i.pipe(Xe(n,o),e())}}function Xe(t,r){return T(e=>{let n=w(e.action),o=t[n],i=r?r[e.status]:!0;return o&&i})}function Le(){return M(t=>t.action)}function Ze(t){return t.reduce((r,e)=>(r[w(e)]=!0,r),{})}function He(t){return t.reduce((r,e)=>(r[e]=!0,r),{})}function Ye(t){return r=>{let e=u({},r);for(let n in t)e[n]=t[n];return e}}var It=(()=>{class t{constructor(e){this._internalStateOperations=e}createStateContext(e){let n=this._internalStateOperations.getRootStateOperations();return{getState(){let o=n.getState();return ce(o,e.path)},patchState(o){let i=n.getState(),s=Ye(o);Yt(n,i,s,e.path)},setState(o){let i=n.getState();Zt(o)?Yt(n,i,o,e.path):ae(n,i,o,e.path)},dispatch(o){return n.dispatch(o)}}}static{this.\u0275fac=function(n){return new(n||t)(c(R))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ae(t,r,e,n){let o=yt(r,n,e);return t.setState(o),o}function Yt(t,r,e,n){let o=ce(r,n),i=e(o);return ae(t,r,i,n)}function ce(t,r){return z(t,r)}var Kn=new RegExp("^[a-zA-Z0-9_]+$");function ze(t,r,e){let n=e[t];n&&n!==r&&_e(t,r.name,n.name)}function Ke(t){t.forEach(r=>{N(r)||Ee(r.name)})}function qe(t){Je(t)||We(t)||console.warn(Oe(t.name))}function We(t){return!!t.\u0275prov}function Je(t){return(t.__annotations__||[]).some(e=>e?.ngMetadataName==="Injectable")}var Qe=!1,tn=new h(Qe?"NGXS_DEVELOPMENT_OPTIONS":"",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})}),en=(()=>{class t{constructor(e){this._ignoredActions=new Set([H.type,Y.type]),typeof e.warnOnUnhandledActions=="object"&&this.ignoreActions(...e.warnOnUnhandledActions.ignore)}ignoreActions(...e){for(let n of e)this._ignoredActions.add(n.type)}warn(e){Array.from(this._ignoredActions).some(o=>o===w(e))||(e=e.constructor&&e.constructor.name!=="Object"?e.constructor.name:e.type,console.warn(`The ${e} action has been dispatched but hasn't been handled. This may happen if the state with an action handler for this action is not registered.`))}static{this.\u0275fac=function(n){return new(n||t)(c(tn))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})(),nn=(()=>{class t{constructor(){this._ngZone=l(E),this._errorHandler=l(Ct)}handleError(e,n){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(e))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),K=!1;function rn(t){let r=t===void 0?{}:t;return t&&(Array.isArray(t)?r=t.slice():typeof t=="object"&&(r=u({},t))),r}var b=(()=>{class t{constructor(e,n,o,i,s,a,d){this._injector=e,this._config=n,this._parentFactory=o,this._actions=i,this._actionResults=s,this._stateContextFactory=a,this._initialState=d,this._actionsSubscription=null,this._propGetter=l(Pe),this._ngxsUnhandledErrorHandler=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=X(()=>{let g=this,S=g._propGetter;function f(_){let y=g.statePaths[_];return y?S(y.split(".")):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(_){let y=f(_);return y||((...de)=>(y||(y=f(_)),y?y(...de):void 0))},getSelectorOptions(_){let y=g._config.selectorOptions;return u(u({},y),_||{})}}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}ngOnDestroy(){this._actionsSubscription?.unsubscribe()}add(e){K&&Ke(e);let{newStates:n}=this.addToStatesMap(e);if(!n.length)return[];let o=ke(n),i=Ue(o),s=Ve(o),a=Ge(n),d=[];for(let g of i){let S=a[g],f=s[g],m=S[v];this.addRuntimeInfoToMeta(m,f),K&&qe(S);let _={name:g,path:f,isInitialised:!1,actions:m.actions,instance:this._injector.get(S),defaults:rn(m.defaults)};this.hasBeenMountedAndBootstrapped(g,f)||d.push(_),this.states.push(_)}return d}addAndReturnDefaults(e){let n=e||[],o=this.add(n);return{defaults:o.reduce((s,a)=>yt(s,a.path,a.defaults),{}),states:o}}connectActionHandlers(){if(this._parentFactory||this._actionsSubscription!==null)return;let e=new D;this._actionsSubscription=this._actions.pipe(T(n=>n.status==="DISPATCHED"),C(n=>{e.next(n);let o=n.action;return this.invokeActions(e,o).pipe(M(()=>({action:o,status:"SUCCESSFUL"})),nt({action:o,status:"CANCELED"}),P(i=>{let s=this._ngxsUnhandledErrorHandler||=this._injector.get(nn),a=Ne(i,()=>s.handleError(i,{action:o}));return O({action:o,status:"ERRORED",error:a})}))})).subscribe(n=>this._actionResults.next(n))}invokeActions(e,n){let o=w(n),i=[],s=!1;for(let a of this.states){let d=a.actions[o];if(d)for(let g of d){let S=this._stateContextFactory.createStateContext(a);try{let f=a.instance[g.fn](S,n);at(f)&&(f=Q(f)),tt(f)?(f=f.pipe(C(m=>at(m)?Q(m):tt(m)?m:O(m)),nt({})),g.options.cancelUncompleted&&(f=f.pipe(G(e.pipe($e(n)))))):f=O({}).pipe(I()),i.push(f)}catch(f){i.push(F(f))}s=!0}}if(K&&!s){let a=this._injector.get(en,null);a&&a.warn(n)}return i.length||i.push(O({})),et(i)}addToStatesMap(e){let n=[],o=this.statesByName;for(let i of e){let s=N(i).name;K&&ze(s,i,o),!o[s]&&(n.push(i),o[s]=i)}return{newStates:n}}addRuntimeInfoToMeta(e,n){this.statePaths[e.name]=n,e.path=n}hasBeenMountedAndBootstrapped(e,n){let o=z(this._initialState,n)!==void 0;return this.statesByName[e]&&o}static{this.\u0275fac=function(n){return new(n||t)(c(ot),c(A),c(t,12),c(ee),c(ne),c(It),c(gt,8))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac})}}return t})(),W=(()=>{class t{constructor(e,n,o,i,s,a){this._stateStream=e,this._internalStateOperations=n,this._config=o,this._internalExecutionStrategy=i,this._stateFactory=s,this._selectableStateStream=this._stateStream.pipe(q(this._internalExecutionStrategy),I({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(e){return this._internalStateOperations.getRootStateOperations().dispatch(e)}select(e){let n=this.getStoreBoundSelectorFn(e);return this._selectableStateStream.pipe(M(n),P(o=>this._config.selectorOptions.suppressErrors&&o instanceof TypeError?O(void 0):F(o)),bt(),q(this._internalExecutionStrategy))}selectOnce(e){return this.select(e).pipe(k(1))}selectSnapshot(e){return this.getStoreBoundSelectorFn(e)(this._stateStream.getValue())}selectSignal(e){let n=this.getStoreBoundSelectorFn(e);return $(()=>n(this._stateStream.state()))}subscribe(e){return this._selectableStateStream.pipe(q(this._internalExecutionStrategy)).subscribe(e)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(e){this._internalStateOperations.getRootStateOperations().setState(e)}getStoreBoundSelectorFn(e){let n=se(e),o=this._stateFactory.getRuntimeSelectorContext();return n(o)}initStateStream(e){let n=this._stateStream.value;(!n||Object.keys(n).length===0)&&this._stateStream.next(e)}static{this.\u0275fac=function(n){return new(n||t)(c(Z),c(R),c(A),c(Qt),c(b),c(gt,8))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),on=!1,sn=new h(on?"NGXS_PREBOOT_FNS":"");var an=(()=>{class t{static{this.store=null}static{this.config=null}constructor(e,n){t.store=e,t.config=n}ngOnDestroy(){t.store=null,t.config=null}static{this.\u0275fac=function(n){return new(n||t)(c(W),c(A))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cn=!1,ue=(()=>{class t{constructor(e,n,o,i){this._store=e,this._internalStateOperations=n,this._stateContextFactory=o,this._appBootstrappedState=i,this._destroy$=new x(1)}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(e,n){cn&&(e instanceof H?this._initStateHasBeenDispatched=!0:e instanceof Y&&!this._initStateHasBeenDispatched&&console.error(Ie(e.addedStates))),this._internalStateOperations.getRootStateOperations().dispatch(e).pipe(T(()=>!!n),Rt(()=>this._invokeInitOnStates(n.states)),C(()=>this._appBootstrappedState),T(o=>!!o),G(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(n.states))}_invokeInitOnStates(e){for(let n of e){let o=n.instance;o.ngxsOnChanges&&this._store.select(i=>z(i,n.path)).pipe(At(void 0),wt(),G(this._destroy$)).subscribe(([i,s])=>{let a=new mt(i,s,!n.isInitialised);o.ngxsOnChanges(a)}),o.ngxsOnInit&&o.ngxsOnInit(this._getStateContext(n)),n.isInitialised=!0}}_invokeBootstrapOnStates(e){for(let n of e){let o=n.instance;o.ngxsAfterBootstrap&&o.ngxsAfterBootstrap(this._getStateContext(n))}}_getStateContext(e){return this._stateContextFactory.createStateContext(e)}static{this.\u0275fac=function(n){return new(n||t)(c(W),c(R),c(It),c(L))}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),le=!1;function un(){(l(sn,{optional:!0})||[]).forEach(s=>s());let r=l(b),e=l(R);l(W),l(an);let n=l(re,{optional:!0})||[],o=l(ue),i=r.addAndReturnDefaults(n);e.setStateToTheCurrentWithNew(i),r.connectActionHandlers(),o.ngxsBootstrap(new H,i)}function ln(){l(W);let t=l(R),r=l(b),e=l(oe,{optional:!0})||[],n=l(ue),o=e.reduce((s,a)=>s.concat(a),[]),i=r.addAndReturnDefaults(o);i.states.length&&(t.setStateToTheCurrentWithNew(i),n.ngxsBootstrap(new Y(i.defaults),i))}var qn=new h(le?"NGXS_ROOT_STORE_INITIALIZER":""),Wn=new h(le?"NGXS_FEATURE_STORE_INITIALIZER":"");var dn=(()=>{class t{constructor(){un()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=U({type:t})}static{this.\u0275inj=V({})}}return t})(),fn=(()=>{class t{constructor(){ln()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=U({type:t})}static{this.\u0275inj=V({})}}return t})();function pn(t,r){return[b,vt,...t,{provide:re,useValue:t},{provide:kt,useFactory:()=>{let e=l(L);return()=>e.bootstrap()},multi:!0},{provide:ie,useValue:r},{provide:Jt,useValue:r.executionStrategy},{provide:Bt,useExisting:It},{provide:$t,useExisting:b}]}function hn(t){return[b,vt,...t,{provide:oe,multi:!0,useValue:t}]}var Jn=(()=>{class t{static forRoot(e=[],n={}){return{ngModule:dn,providers:pn(e,n)}}static forFeature(e=[]){return{ngModule:fn,providers:hn(e)}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=U({type:t})}static{this.\u0275inj=V({})}}return t})();function Qn(t,r){return(e,n,o)=>{let i=pt(e.constructor),s=Array.isArray(t)?t:[t];for(let a of s){let d=a.type;i.actions[d]||(i.actions[d]=[]),i.actions[d].push({fn:n,options:r||{},type:d})}}}function tr(t){return r=>{let e=r,n=pt(e),o=Object.getPrototypeOf(e),i=gn(o,t);Sn({meta:n,inheritedStateClass:o,optionsWithInheritance:i}),e[ft]=i}}function gn(t,r){let e=t[ft]||{};return u(u({},e),r)}function Sn(t){let{meta:r,inheritedStateClass:e,optionsWithInheritance:n}=t,{children:o,defaults:i,name:s}=n,a=typeof s=="string"?s:s&&s.getName()||null;if(e.hasOwnProperty(v)){let d=e[v]||{};r.actions=u(u({},r.actions),d.actions)}r.children=o,r.defaults=i,r.name=a}var zt="NGXS_SELECTOR_OPTIONS_META",Kt={getOptions:t=>t&&t[zt]||{},defineOptions:(t,r)=>{t&&(t[zt]=r)}};function yn(t,r){let e=Vt(t);e.originalFn=t;let n=()=>({});r&&(e.containerClass=r.containerClass,e.selectorName=r.selectorName||null,n=r.getSelectorOptions||n);let o=u({},e);return e.getSelectorOptions=()=>mn(o,n()),e}function mn(t,r){return u(u(u(u({},Kt.getOptions(t.containerClass)||{}),Kt.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),r)}function vn(t,r,e){let n=Re(r,e),o=yn(r,e);return o.makeRootSelector=Ae(o,t,n),n}function er(t){return(r,e,n)=>{n||=Object.getOwnPropertyDescriptor(r,e);let o=n?.value,i=vn(t,o,{containerClass:r,selectorName:e.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return i},originalFn:o}}}export{H as a,Lt as b,w as c,W as d,Jn as e,Qn as f,tr as g,er as h};
